(this.webpackJsonptodos=this.webpackJsonptodos||[]).push([[0],{185:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(86),o=r(5),s=r(6),c=r(4),u=r(7),l=r(8),p=r(12),h=function(e){function t(e){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.error.length<1?a.a.createElement("div",null):a.a.createElement("div",{className:"form__text-error active"},a.a.createElement("span",null,"!"),this.props.error)}}]),t}(a.a.Component),d=function(e){function t(e){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e;return"numeric"===this.props.step.type&&(e="Tip: lick on the number to edit manually"),"undefinded"!==typeof this.props.step.description&&(e=this.props.step.description),a.a.createElement("div",null,a.a.createElement("div",{className:"form__main-text"},a.a.createElement("ul",null,this.props.step.required?a.a.createElement("li",null,a.a.createElement("span",null,"*")," - Required"):"")),a.a.createElement("div",{className:"form__main-title"},a.a.createElement("h2",null,this.props.step.title,a.a.createElement("span",{style:this.props.step.required?{}:{fontSize:"10px"}},this.props.step.required?"*":"(optional)"),a.a.createElement("div",{style:{fontSize:"12px",color:"#CCC",lineHeight:"20px"}},e))))}}]),t}(a.a.Component),m=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=r.handleChange.bind(Object(p.a)(r)),r.forceUpdate(),r}return Object(l.a)(t,e),Object(s.a)(t,[{key:"loadCurrentValue",value:function(){this.props.config.variants;var e=this.props.parent.getCurrentValue();null!==e&&e.length>0&&(this.props.config.variants=this.props.config.variants.reduce((function(t,r){return r.checked=e===r.value,r.showMyVariant=!1,console.log(r,e),void 0!==r.title&&(r.showMyVariant=e===r.value),t.push(r),t}),[]))}},{key:"handleOnClick",value:function(e){var t=this;if(null!==e.value&&!e.custom)return this.props.parent.dispatch({type:"changeCurrentValue",currentValue:e.value}),void this.props.parent.dispatch({type:"nextStep",step:this.props.config,value:e.value});this.props.config.variants;this.props.config.variants=this.props.config.variants.reduce((function(r,n){return n.showMyVariant?(n.value="",n.showMyVariant=!1,r.push(n),r):n.title===e.title&&!e.showMyVariant&&e.custom?(n.checked=!0,n.showMyVariant=!0,n.value="",r.push(n),t.props.parent.dispatch({type:"changeCurrentValue",currentValue:""}),r):(n.checked=e.value===n.value,r.push(n),r)}),[]),this.forceUpdate()}},{key:"handleChange",value:function(e){this.props.config.variants=this.props.config.variants.reduce((function(t,r){return void 0!==r.title&&(r.value=e.target.value),t.push(r),t}),[]),this.props.parent.dispatch({type:"changeCurrentValue",currentValue:e.target.value}),this.forceUpdate()}},{key:"render",value:function(){var e=this;this.loadCurrentValue();var t=0;return a.a.createElement("div",{className:"form__main"},a.a.createElement(d,{step:this.props.config}),a.a.createElement("div",{className:"form__group"},this.props.config.variants.map((function(r){var n,i;return t++,console.log(void 0!==r.showMyVariant&&!1!==r.showMyVariant,r.checked),a.a.createElement("div",{className:"from__group-radio"},a.a.createElement("input",{checked:null!==(n=r.checked)&&void 0!==n&&n,type:"radio",value:r.value,name:r.title,id:t+"t"}),a.a.createElement("label",{onClick:function(){return e.handleOnClick(r)},htmlFor:t+"t"},void 0!==r.custom?r.title:r.value),a.a.createElement("input",{onChange:e.handleChange,value:null!==(i=e.props.parent.getCurrentValue())&&void 0!==i?i:"",style:void 0!==r.showMyVariant&&!1!==r.showMyVariant?{display:"block"}:{display:"none"},type:"text",placeholder:r.placeholder?r.placeholder:"My variant"}))}))),a.a.createElement(h,{error:this.props.parent.getError()}))}}]),t}(a.a.Component),f=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=r.handleChange.bind(Object(p.a)(r)),r}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.nameInput.focus()}},{key:"handleChange",value:function(e){this.props.parent.dispatch({type:"changeCurrentValue",currentValue:e.target.value}),this.forceUpdate()}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"form__main"},a.a.createElement(d,{step:this.props.config}),a.a.createElement("div",{className:"form__group"},a.a.createElement("input",{ref:function(t){e.nameInput=t,null!==t&&t.focus()},type:"text",onChange:this.handleChange,placeholder:this.props.config.placeholder,value:this.props.parent.getCurrentValue()})),a.a.createElement(h,{error:this.props.parent.getError()}))}}]),t}(a.a.Component),v=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=r.handleChange.bind(Object(p.a)(r)),r}return Object(l.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=this.props.config.variants.reduce((function(e,t){return t.checked&&e.push(t.value),e}),[]);this.props.config.variants=this.props.config.variants.reduce((function(t,r){return void 0!==r.title&&r.custom&&(r.value=e.target.value,r.checked=!0),t.push(r),t}),[]),t.push(e.target.value),this.props.parent.dispatch({type:"changeCurrentValue",currentValue:t}),this.syncWithState(),this.forceUpdate()}},{key:"handleOnClick",value:function(e){var t=this,r=[];this.props.config.variants=this.props.config.variants.reduce((function(n,a){return e.value===a.value&&a.checked?(e.custom&&(t.myVariant="",e.showMyVariant=!1),a.checked=0,n.push(a),n):(a.checked&&r.push(a.value),e.value===a.value?(a.checked=1,void 0!==a.custom&&a.custom&&e.custom&&a.checked&&(a.showMyVariant=!0),r.push(a.value),n.push(a),n):(n.push(a),n))}),[]),this.props.parent.dispatch({type:"changeCurrentValue",currentValue:r}),this.forceUpdate()}},{key:"syncWithState",value:function(){var e=this.props.parent.getCurrentValue();this.props.config.variants=this.props.config.variants.reduce((function(t,r){return r.checked=e.includes(r.value),t.push(r),t}),[])}},{key:"render",value:function(){var e=this;return this.syncWithState(),a.a.createElement("div",{className:"form__main"},a.a.createElement(d,{step:this.props.config}),a.a.createElement("div",{className:"form__group"},this.props.config.variants.map((function(t){var r;return a.a.createElement("div",{className:"from__group-radio"},a.a.createElement("input",{checked:t.checked,type:"checkbox",value:t.value,name:t.title,id:t.value}),a.a.createElement("label",{onClick:function(){return e.handleOnClick(t)},htmlFor:t.title},void 0!==t.custom?t.title:t.value),a.a.createElement("input",{onChange:e.handleChange,value:null!==(r=t.value)&&void 0!==r?r:"",style:void 0!==t.showMyVariant&&!1!==t.showMyVariant?{display:"block"}:{display:"none"},type:"text",placeholder:"My variant"}))}))),a.a.createElement(h,{error:this.props.parent.getError()}))}}]),t}(a.a.Component),b=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=r.handleChange.bind(Object(p.a)(r)),r.increment=r.increment.bind(Object(p.a)(r)),r.decrement=r.decrement.bind(Object(p.a)(r)),r}return Object(l.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){0===this.props.parent.getCurrentValue()&&(e.target.value=e.target.value.replace("0","")),this.props.parent.dispatch({type:"changeCurrentValue",currentValue:e.target.value}),this.forceUpdate()}},{key:"increment",value:function(){this.props.parent.dispatch({type:"changeCurrentValue",currentValue:this.props.parent.getCurrentValue()+1}),this.forceUpdate()}},{key:"decrement",value:function(){var e=this.props.parent.getCurrentValue();e<=0||(this.props.parent.dispatch({type:"changeCurrentValue",currentValue:e-1}),this.forceUpdate())}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(d,{step:this.props.config}),a.a.createElement("div",{className:"form__group form__group--calc"},a.a.createElement("button",{className:"form__btn-calc",onClick:this.decrement,type:"button"},"-"),a.a.createElement("input",{ref:function(t){e.nameInput=t,null!==t&&t.focus()},className:"form__input-calc",type:"text",onChange:this.handleChange,value:this.props.parent.getCurrentValue()}),a.a.createElement("button",{className:"form__btn-calc",onClick:this.increment,type:"button"},"+")),a.a.createElement(h,{error:this.props.parent.getError()}))}}]),t}(a.a.Component),g=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=r.handleChange.bind(Object(p.a)(r)),r.handleChangeConfirmationCode=r.handleChangeConfirmationCode.bind(Object(p.a)(r)),r.changePhoneNumber=r.changePhoneNumber.bind(Object(p.a)(r)),r.confirmationCode="",r}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.nameInput.focus()}},{key:"handleChange",value:function(e){this.props.parent.dispatch({type:"changeCurrentValue",currentValue:e.target.value}),this.forceUpdate()}},{key:"handleChangeConfirmationCode",value:function(e){this.confirmationCode=e.target.value,this.props.parent.dispatch({type:"changeConfirmationCode",confirmationCode:this.confirmationCode}),this.forceUpdate()}},{key:"changePhoneNumber",value:function(e){e.preventDefault(),this.props.parent.dispatch({type:"phoneNumberPreviousStep"})}},{key:"render",value:function(){return console.log(this.confirmationNeeded()),this.confirmationNeeded()?this.renderConfirmation():this.renderPhoneInput()}},{key:"renderPhoneInput",value:function(){var e=this,t=this.props.config;return a.a.createElement("div",{className:"form__main"},a.a.createElement(d,{step:t}),a.a.createElement("div",{className:"form__group"},a.a.createElement("input",{ref:function(t){e.nameInput=t,null!==t&&t.focus()},type:"text",onChange:this.handleChange,placeholder:this.props.config.placeholder,value:this.props.parent.getCurrentValue()})),a.a.createElement(h,{error:this.props.parent.getError()}))}},{key:"renderConfirmation",value:function(){var e=this,t=Object.assign({},this.props.config);return t.title="Confirmation code",t.placeholder="1111",t.description="We have sent you a confirmation to "+this.props.parent.getCurrentValue().replace("unconfirmed-",""),a.a.createElement("div",{className:"form__main"},a.a.createElement(d,{step:t}),a.a.createElement("div",{className:"form__group"},a.a.createElement("input",{ref:function(t){e.nameInput=t,null!==t&&t.focus()},type:"text",onChange:this.handleChangeConfirmationCode,placeholder:t.placeholder,value:this.confirmationCode})),a.a.createElement("br",null),a.a.createElement("a",{href:"#",style:{textDecoration:"none",color:"green"},onClick:this.changePhoneNumber},"Change phone number"),a.a.createElement(h,{error:this.props.parent.getError()}))}},{key:"confirmationNeeded",value:function(){return this.props.parent.getCurrentValue().includes("unconfirmed-")}}]),t}(a.a.Component),y=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).value="",r.props.state.subscribe((function(){return r.props.state.getState()})),r.state=r.props.state,r}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(e){var t,r=this.props.step;switch(r.type){case"input":t=a.a.createElement(f,{config:r,parent:this});break;case"single-choice":t=a.a.createElement(m,{config:r,parent:this});break;case"multiple-choice":t=a.a.createElement(v,{config:r,parent:this});break;case"numeric":t=a.a.createElement(b,{config:r,parent:this});break;case"phone_number":t=a.a.createElement(g,{config:r,parent:this})}return a.a.createElement("div",null,t)}},{key:"getError",value:function(){return this.props.state.getState().error}},{key:"dispatch",value:function(e){this.props.state.dispatch(e)}},{key:"getCurrentValue",value:function(){return this.props.state.getState().currentValue}}]),t}(a.a.Component),C=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).once=!1,r}return Object(l.a)(t,e),Object(s.a)(t,[{key:"previousStep",value:function(e){return e.preventDefault(),this.props.parent.previousStep(),!1}},{key:"render",value:function(){var e;console.log(this.props.step);var t=this.props.step.questionNumber/this.props.step.total*100;return 1===this.props.step.questionNumber&&(t=0),a.a.createElement("div",{className:"form__header"},a.a.createElement("div",{className:"form__header-title"},a.a.createElement("h3",null,null!==(e=window.constants.FRONTFORM_STEP)&&void 0!==e?e:"Step"," ",this.props.step.sectionNumber,":",a.a.createElement("span",null,this.props.step.section))),a.a.createElement("style",{dangerouslySetInnerHTML:{__html:[".form__header-line:before {","  width: "+t+"%","}"].join("\n")}}),a.a.createElement("div",{className:"form__header-line"}),a.a.createElement("div",{className:"form__header-bottom"},a.a.createElement("a",{className:"form__arrow active",href:"#",onClick:this.previousStep.bind(this)},"back"),a.a.createElement("div",{className:"from__header-number"},a.a.createElement("span",null,this.props.step.questionNumber),"/",this.props.step.total)))}}]),t}(a.a.Component),w=function(e){function t(e){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"submit",value:function(e){return e.preventDefault(),this.props.parent.submit(this.props.parent.value),!1}},{key:"clearForm",value:function(e){e.preventDefault(),this.props.parent.clearForm()}},{key:"clearAll",value:function(){var e;return a.a.createElement("a",{className:"form__footer-text clear-all",onClick:this.clearForm.bind(this),href:"#",style:{color:"red"}},null!==(e=window.constants.FRONTFORM_CLEAR_ALL_ANSWERS)&&void 0!==e?e:"Clear all answers")}},{key:"getButtonName",value:function(){var e,t,r=this.props.parent.currentValue(),n=this.getCurrentStep().required;return(r.length<1||0==r)&&!n?null!==(t=window.constants.FRONTFORM_NEXT)&&void 0!==t?t:"Next":null!==(e=window.constants.FRONTFORM_SKIP)&&void 0!==e?e:"Skip"}},{key:"getCurrentStep",value:function(){return this.props.step}},{key:"render",value:function(){return a.a.createElement("div",{className:"form__footer"},this.clearAll(),a.a.createElement("a",{className:"form__btn",onClick:this.submit.bind(this)},this.getButtonName()))}}]),t}(a.a.Component);var j=function(e,t){return fetch(window.host+"/launch-api/api/state-store/"+t+"/"+e,{credentials:"include",method:"DELETE",mode:"cors",redirect:"follow",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.token}}).then((function(e){return e.json()}))};var O=function(e){return fetch(window.host+"/sendSms",{credentials:"include",method:"POST",mode:"cors",redirect:"follow",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.token},body:JSON.stringify({recipient:e})}).then((function(e){return e.json()}))};var S=function(e,t){return fetch(window.host+"/checkSms",{credentials:"include",method:"POST",mode:"cors",redirect:"follow",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.token},body:JSON.stringify({recipient:e,code:t})}).then((function(e){return e.json()}))},E=r(189),k=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).props.state.subscribe((function(){r.forceUpdate()})),r}return Object(l.a)(t,e),Object(s.a)(t,[{key:"onFormSubmit",value:function(e){e.preventDefault(),this.submit(this.currentValue())}},{key:"cancelClean",value:function(){this.props.state.dispatch({type:"cancelClean"})}},{key:"confirmClean",value:function(){var e=this;this.props.state.dispatch({type:"load"}),j("form",window.userId).then((function(){e.props.state.dispatch({type:"clear-confirm"})}))}},{key:"render",value:function(e){this.props.state,window.config;var t=this.getCurrentStep();if(this.currentStep=t,console.log(t),this.props.state.getState().showClearState)return a.a.createElement("form",{className:"form",style:{textAlign:"center"},onSubmit:this.onFormSubmit.bind(this)},a.a.createElement("h2",null,"Confirm clearing all answers"),a.a.createElement("div",{className:"confirm-container"},a.a.createElement("a",{href:"#",onClick:this.confirmClean.bind(this),className:"form__btn2 form__btn2-red"},"Confirm"),a.a.createElement("a",{href:"#",onClick:this.cancelClean.bind(this),className:"form__btn2"},"Cancel")));if(this.isScrollHeader()){var r=document.getElementById("main-form");if(null!==r&&null!==r.getBoundingClientRect()){var n=r.getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:n,behavior:"smooth"})}}return a.a.createElement("form",{className:"form",id:"main-form",onSubmit:this.onFormSubmit.bind(this)},a.a.createElement(C,{step:t,parent:this}),a.a.createElement(y,{state:this.props.state,step:t}),a.a.createElement(w,{step:t,parent:this,state:this.props.state}))}},{key:"getCurrentStep",value:function(){return this.props.state.getState().steps[this.props.state.getState().currentStep]}},{key:"clearForm",value:function(){this.forceUpdate(),this.props.state.dispatch({type:"clear"})}},{key:"currentValue",value:function(){return this.props.state.getState().currentValue}},{key:"isScrollHeader",value:function(){var e=this.props.state.getState().isScrollHeader;return void 0!==e&&e}},{key:"previousStep",value:function(){var e=this.currentValue();"phone_number"===this.currentStep.type&&e.includes("unconfirmed-")?this.props.state.dispatch({type:"phoneNumberPreviousStep"}):this.props.state.dispatch({type:"previousStep"})}},{key:"submit",value:function(e){var t=this,r=this.currentValue();if("phone_number"===this.currentStep.type&&!r.includes("unconfirmed-")){var n=Object(E.a)(r,window.countryCode);return void 0!==n&&n.isValid()?(r=n.getURI().replace("tel:",""),this.props.state.dispatch({type:"changeCurrentValue",currentValue:r}),this.props.state.getState().verifiedNumbers.includes(r)?(this.props.state.dispatch({type:"nextStep",value:r}),void this.forceUpdate()):(O(r),void this.props.state.dispatch({type:"phoneNumberSubmit"}))):void this.props.state.dispatch({type:"error",error:"Invalid phone number. Please, use international format with plus, like a +61289876544"})}if("phone_number"===this.currentStep.type&&this.currentValue().includes("unconfirmed-"))return this.props.state.dispatch({type:"load"}),void S(this.currentValue().replace("unconfirmed-",""),this.props.state.getState().confirmationCode).then((function(e){t.props.state.dispatch({type:"ready"});var r=t.currentValue().replace("unconfirmed-","");if(e.confirmed){var n=t.currentValue().replace("unconfirmed-","");t.props.state.dispatch({type:"changeCurrentValue",currentValue:n}),t.props.state.dispatch({type:"nextStep",value:r}),t.props.state.dispatch({type:"addVerifiedNumbers",verifiedNumber:r})}else t.props.state.dispatch({type:"error",error:"Incorrect confirmation code"})}));this.props.state.dispatch({type:"nextStep",step:this.currentStep,value:e})}}]),t}(a.a.Component),V=r(9);var _=function(e){var t=[],r=0,n=0;for(var a in e)for(var i in n++,e[a].questions){r++;var o=e[a].questions[i];o.section=e[a].title,o.questionNumber=r,o.sectionNumber=n,t.push(o)}var s=t.length;for(var c in t)t[c].total=s;return t};var N=function(e,t,r){return fetch(window.host+"/launch-api/api/state-store",{credentials:"include",method:"PATCH",mode:"cors",redirect:"follow",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.token},body:JSON.stringify({data:{type:"state_stores",id:"new",attributes:{type:e,state:r},relationships:{user:{data:{id:t,type:"users"}}}}})}).then((function(e){return e.json()}))};var T=function(e,t){return fetch(window.host+"/formSubmit",{credentials:"include",method:"POST",mode:"cors",redirect:"follow",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.token},body:JSON.stringify(t)}).then((function(e){return e.json()}))};var A=function(e){var t={};for(var r in e.steps){var n=e.steps[r].title,a=e.steps[r].name;t[a]={title:n,name:a,value:e.answers[r],stepNumber:r}}return t.mode="undefined"!==typeof window.config.mode?window.config.mode:"self-service",t};function I(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function M(e){T(window.userId,A(e)).then((function(e){if("object"===typeof e&&null!==e&&"undefined"!==typeof e&&e&&"undefined"!==typeof e.token){var t=window.config.lastStep;null!==e.token&&e.token.length>1&&(t+="&token="+e.token),window.location.href=t}}))}var x=Object.assign({},{currentStep:0,steps:_(window.config.questions.steps),answers:[],currentValue:"",error:"",isLoaded:!1,verifiedNumbers:[]});function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;return function(){console.log(t);var r,n=Object.assign({},{currentStep:0,steps:_(window.config.questions.steps),answers:[],currentValue:"",error:"",isLoaded:!1,verifiedNumbers:[],showClearState:!1,approxGoalGraphShowed:!1});switch(console.log(e),t.type){case"reload":return Object(V.a)({},t.state,{isLoaded:!0});case"load":return Object(V.a)({},e,{isLoaded:!1});case"clear":return Object(V.a)({},e,{isLoaded:!0,showClearState:!0});case"cancelClean":return Object(V.a)({},e,{isLoaded:!0,showClearState:!1,isScrollHeader:!0});case"clear-confirm":return Object(V.a)({},n,{isLoaded:!0,isScrollHeader:!0});case"ready":return Object(V.a)({},e,{isLoaded:!0});case"error":return Object(V.a)({},e,{error:t.error});case"nextStep":if(r=e.steps[e.currentStep],e.currentValue=void 0===e.currentValue||null===e.currentValue?"":e.currentValue,"undefined"!==typeof r.validation&&r.validation.includes("email")&&!I(e.currentValue))return Object(V.a)({},e,{currentStep:e.currentStep,error:"Email is invalid"});if(r.required&&e.currentValue.length<1&&["input","single-choice"].includes(r.type))return Object(V.a)({},e,{currentStep:e.currentStep,error:"This field is required"});if(r.required&&"multiple-choice"===r.type&&(null===e.currentValue||0===e.currentValue.length))return Object(V.a)({},e,{currentStep:e.currentStep,error:"This field is required"});if(r.required&&"phone_number"===r.type&&0===e.currentValue)return Object(V.a)({},e,{currentStep:e.currentStep,error:"This field is required"});if(r.required&&"numeric"===r.type&&0===e.currentValue)return Object(V.a)({},e,{currentStep:e.currentStep,error:"This field is required"});if("phone_number"===r.type&&e.currentValue.includes("unconfirmed-"))return Object(V.a)({},e,{currentStep:e.currentStep});var a=e.currentStep+1;if(console.log(a,e.currentStep,e),e.answers[e.currentStep]=e.currentValue,a===r.total)return M(e),Object(V.a)({},e,{isLoaded:!1,stopApp:!0});var i,o=e.steps[a];return void 0===e.answers[a]&&(e.currentValue={input:"","single-choice":[],"multiple-choice":[],numeric:void 0!==o.predefinedValue?o.predefinedValue:0,phone_number:""}[o.type]),console.log(e.answers[a]),void 0!==e.answers[a]&&null!==e.answers[a]&&e.answers[a].length>0&&(e.currentValue=e.answers[a]),"redirect"===o.type?(a+=1,i=void 0!==e.answers[a]&&null!==e.answers[a]?e.answers[a]:void 0!==o.predefinedValue?o.predefinedValue:"",e.answers[a-1]="",e=Object(V.a)({},e,{currentStep:a,error:"",isScrollHeader:!0,currentValue:i}),N("form",window.userId,e).then((function(e){return window.location.href=o.href})),e):(e=Object(V.a)({},e,{currentStep:a,error:"",isScrollHeader:!0}),N("form",window.userId,e),e);case"previousStep":if(0===e.currentStep)return e;null!==e.currentValue&&e.currentValue.length>0&&(e.answers[e.currentStep]=e.currentValue);var s=e.currentStep-1;return"redirect"===e.steps[s].type&&(s-=1),Object(V.a)({},e,{currentStep:s,currentValue:e.answers[s],error:"",isScrollHeader:!0});case"changeCurrentValue":return e=Object(V.a)({},e,{currentValue:t.currentValue,isScrollHeader:!1});case"phoneNumberSubmit":return e=Object(V.a)({},e,{currentValue:"unconfirmed-"+e.currentValue,error:""}),N("form",window.userId,e),e;case"phoneNumberPreviousStep":return e=Object(V.a)({},e,{currentValue:"",error:""}),N("form",window.userId,e),e;case"changeConfirmationCode":return e=Object(V.a)({},e,{confirmationCode:t.confirmationCode});case"addVerifiedNumbers":return e.verifiedNumbers.push(t.verifiedNumber),N("form",window.userId,e),e;case"submitSingleChoice":return e.answers[e.currentStep]=t.variant.value,r=e.steps[e.currentStep],(e=Object(V.a)({},e,{currentStep:e.currentStep+1,error:""})).currentStep+1===r.total?(M(e),Object(V.a)({},e,{isLoaded:!1,stopApp:!0,isScrollHeader:!0})):(N("form",window.userId,e),e);default:return e}}()}var U=r(88);var F=function(e,t){return fetch(window.host+"/launch-api/api/state-store/"+t+"/"+e,{credentials:"include",method:"GET",mode:"cors",redirect:"follow",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.token}}).then((function(e){return e.json()}))},L=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).initialState={},r.state=Object(U.a)(q),r.state.subscribe((function(){r.forceUpdate()})),r.state.getState().stopApp?Object(c.a)(r):(F("form",window.userId).then((function(e){if("undefined"===typeof e.data)return r.state.dispatch({type:"ready"}),void r.forceUpdate();r.state.dispatch({type:"reload",state:e.data.attributes.state}),r.forceUpdate()})),r)}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.getState().isLoaded?a.a.createElement("div",null,a.a.createElement(k,{state:this.state,parent:this})):a.a.createElement("div",{className:"wait-spinner"},a.a.createElement("div",{className:"lds-roller"},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null)))}}]),t}(a.a.Component);window.api||(window.api="http://localhost:904/api/v1/"),Object(i.render)(a.a.createElement(L,null),document.getElementById("root"))},90:function(e,t,r){e.exports=r(185)}},[[90,1,2]]]);
//# sourceMappingURL=main.54a7128e.chunk.js.map