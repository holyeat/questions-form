{"version":3,"sources":["http/httpRequest.js","http/createProxy.js","http/createAccount.js","containers/ProxyBindingsCreate.js","http/proxyBindingsListRequest.js","http/deleteBinding.js","http/patchProxy.js","containers/ProxyBindingsList.js","components/App.js","index.js"],"names":["httpRequest","url","method","body","data","credentials","window","token","JSON","stringify","fetch","api","then","response","status","error","Error","json","createProxy","realAddress","proxyAddress","createAccount","username","password","ProxyBindingsCreate","props","state","parent","submitHandle","bind","submitHandlePassword","proxyBindingCreateComponent","lastRealAddress","map","this","message","proxiedAddress","enterPasswordMode","proxyCreateBindingState","forceUpdate","event","preventDefault","document","getElementById","style","display","value","length","mode","rerender","attributes","location","href","catch","encodeURIComponent","setTimeout","proxiedAddressInput","result","characters","charactersLength","i","charAt","Math","floor","random","e","key","charCode","which","type","link","proxyBindingAddress","makeid","toLowerCase","changeHandle","setState","loaderStyle","passwordFormStyle","className","onSubmit","role","id","htmlFor","placeholder","for","onChange","onTodoChange","target","onClick","generateRandomAddress","onKeyDown","onKeyUp","React","Component","proxyBindingsListRequest","deleteBinding","bindingId","patchProxy","realAddresses","ProxyBindingsList","isLoaded","bindings","proxyBindingsListComponent","load","ProxyBindingsListRequest","proxyBindings","lastBinding","Object","keys","real_addresses","console","log","componentDidMount","item","reduce","acc","reduceItem","push","proxy_address","styleDisplay","spinnerStyle","scope","index","real_address","received_emails","color","onClickCapture","click","remove","changeStatus","App","values","render"],"mappings":"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","file":"static/js/main.c0822e76.chunk.js","sourcesContent":["function httpRequest(url, method, body) {\n  let data = {\n    credentials: 'include',\n    'method': method,\n    credentials: 'omit',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n      'Authorization': window.token\n    },\n  };\n  if (method !== 'GET' && method !== 'DELETE') {\n    data.body = JSON.stringify(body);\n  }\n\n\n    return fetch(window.api + url, data)\n      .then(response => {\n\n        if (response.status !== 200 && response.status !== 201 && response.status !== 204) {\n          let error = (new Error('Request failed'));\n          error.json = response.json();\n          throw error; \n        }\n\n        if (method !== 'DELETE') {\n          return response.json()\n        } else {\n          return response;\n        }\n      }\n      );\n}\n\nexport default httpRequest;\n","import httpRequest from './httpRequest';\n\nfunction createProxy(realAddress, proxyAddress) {\n    return httpRequest('proxy-bindings', 'POST', \n    {\n        \"data\" :{\n            \"type\": \"proxy_bindings\",\n            \"attributes\": {\n               \"real_addresses\": [realAddress],\n               \"proxy_address\": proxyAddress\n            }\n        }\n    });\n}\n\nexport default createProxy;\n","import httpRequest from './httpRequest';\n\nfunction createAccount(username, password) {\n    return httpRequest('users', 'POST', \n    {\n        \"data\" :{\n            \"type\": \"users\",\n            \"attributes\": {\n               \"username\": username,\n               \"password\": password\n            }\n        }\n    });\n}\n\nexport default createAccount;\n","import React from 'react';\nimport createProxy from '../http/createProxy';\nimport createAccount from '../http/createAccount';\n\nclass ProxyBindingsCreate extends React.Component {\n    state = {\n    }\n\n    componentDidMount() {\n        \n        this.message = '';\n        this.proxiedAddress='';\n        this.realAddress = '';\n        this.proxiedAddress = '';\n        this.enterPasswordMode = 0;\n        this.password = '';\n\n        this.state.lastRealAddress = this.parent.proxyCreateBindingState.lastRealAddress;\n        this.forceUpdate();\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.parent = props.parent;\n        this.submitHandle = this.submitHandle.bind(this);\n        this.submitHandlePassword = this.submitHandlePassword.bind(this);\n        this.parent.proxyBindingCreateComponent = this;\n        this.lastRealAddress = '';\n        this.map = {};\n    }\n    \n    submitHandle(event) \n    {\n        event.preventDefault();\n        document.getElementById('message').style.display = 'none';\n        let realAddress = document.getElementById('real-address').value;\n        let proxiedAddress = document.getElementById('proxied-address').value;\n        if (realAddress.length === 0 || proxiedAddress.length === 0) {\n            return ;\n        }\n\n        proxiedAddress = proxiedAddress + '@proxiedmail.com';\n        \n        if (window.mode !== 'mainpage') {\n            createProxy(realAddress, proxiedAddress).then(response => {\n                this.parent.rerender(response.data);\n    \n                document.getElementById('real-address').value = '';\n                document.getElementById('proxied-address').value = '';\n                this.proxiedAddress = '';\n                this.forceUpdate();\n            });    \n        } else {\n            this.realAddress = realAddress;\n            this.proxiedAddress = proxiedAddress;\n\n            document.getElementById('real-address').value = '';\n            document.getElementById('proxied-address').value = '';\n            this.enterPasswordMode = 1;\n            this.forceUpdate();\n        }\n    }\n\n    submitHandlePassword(event) \n    {\n        event.preventDefault();\n        let password = document.getElementById('password').value;\n        if (password.length === 0) {\n            return ;\n        }\n        this.password = password;\n        this.forceUpdate();\n\n        createAccount(this.realAddress, this.password).then(response => {\n            let token = response.data.attributes.token;\n            window.token = 'Bearer ' + token;\n            createProxy(this.realAddress, this.proxiedAddress).then(response => {\n                window.location.href = '/en/redirect?token='+token + '&to=/en/board?signup_conversion=1';\n            });\n        }).catch(error => {\n            window.location.href = '/en/signin?email=' + encodeURIComponent(this.realAddress);\n        });\n    }\n\n\n    error(message) {\n        setTimeout(function () {\n            document.getElementById('message').style = 'dispaly:block';\n        }, 200);\n        this.message = message;\n    }\n\n    changeHandle () {\n        let proxiedAddressInput = document.getElementById('proxied-address');\n        if (proxiedAddressInput) {\n            let proxiedAddress = proxiedAddressInput.value;\n            this.proxiedAddress = proxiedAddress;\n            this.forceUpdate();\n        }\n    }\n    \n    makeid(length) {\n        var result           = '';\n        var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        var charactersLength = characters.length;\n        for ( var i = 0; i < length; i++ ) {\n           result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        }\n        return result;\n     }\n     \n\n    onKeyDown (event) {\n        let e = event || window.event;  // get event object\n        let key = !e.charCode ? e.which : e.charCode; // get key cross-browser\n        \n        this.map[key] = e.type == 'keydown';\n        if (this.map[16] === true && this.map[50] === true) {\n            event.preventDefault();\n            return false;\n        }\n    }\n\n    generateRandomAddress(link) {\n        link.preventDefault();\n        let proxyBindingAddress = this.makeid(10).toLowerCase();\n        document.getElementById('proxied-address').value = proxyBindingAddress;\n        this.changeHandle();\n    }\n\n    onTodoChange(value){\n        this.setState({\n             lastRealAddress: value\n        });\n    }\n\n\n    render() {\n        let none = {'display':'none'};\n        let loaderStyle = this.password && this.password.length > 0 ? {'display':'block'} : {'display':'none'};\n        let passwordFormStyle = this.password && this.password.length > 0 ? {'display':'none'} : {'display':'block'};\n        const btnStyle = {'color': '#007bff'};\n        const labelStyle = {};\n\n        if (!this.enterPasswordMode) {\n            return (\n                <div>\n                    <div className=\"alert alert-warning\" id=\"message\" style={none} role=\"alert\">{this.message}</div>\n    \n                    <form className=\"create__form\" onSubmit={this.submitHandle}>\n                    <div className=\"create__form-inner\">\n\n                    <div className=\"form__realaddress\">\n                        <div className=\"form__title\" for=\"real-address\">Real address</div>   \n                        <input type=\"text\"  id=\"real-address\"\n                        value={this.state.lastRealAddress} \n                        onChange={e => this.onTodoChange(e.target.value)}\n                        placeholder=\"John@gmail.com\"/>\n                    </div>\n\n                    <div className=\"form__proxiedmailaddress\">\n                    <div className=\"form__title\" style={labelStyle} htmlFor=\"password\">ProxiedMail Address {this.proxiedAddress}@proxiedmail.com</div>\n                    <button className=\"form__proxiedmailaddress-btn light__btn\" onClick={this.generateRandomAddress.bind(this)}>\n                        Generate random address\n                    </button>\n                    <input type=\"input\" onKeyDown={(this.onKeyDown.bind(this))}  onKeyUp={(this.onKeyDown.bind(this))} onChange={(this.changeHandle.bind(this))} className=\"form__input\" id=\"proxied-address\" placeholder=\"Proxied Email (example: john)\"/>\n                    <button id=\"proceed\" type=\"submit\" className=\"form__btn btn btn-primary\">Create</button>\n\n                    </div>\n\n                        </div>\n                    </form>\n                </div>\n        )\n            ;    \n        } else {\n            return (\n             <div>\n                                     <form className=\"create__form\" onSubmit={this.submitHandlePassword}>\n\n                    <div className=\"create__form-inner\">\n\n               <div className=\"spinner-border\" role=\"status\" id=\"loader\" style={loaderStyle}>\n                    <span className=\"sr-only\">Loading...</span>\n                </div>\n\n                <div style={passwordFormStyle}>\n                 <p className=\"lead\">Your email: <i>{this.realAddress}</i></p>\n                 <p className=\"lead\">To finish adding proxy, please choose password to manage it.</p><br/>\n                       <div className=\"form__proxiedmailaddress\">\n                        <label className=\"form__title\" htmlFor=\"real-address\">Password</label>\n                        <br/>\n                        <input type=\"password\" style={{'margin': 0}} className=\"form__input\" id=\"password\" placeholder=\"Password\"/>\n                        </div>\n                        <button id=\"proceed\"  type=\"submit\" className=\"form__btn btn\">Finish</button>\n                </div>\n             </div>   \n             </form>\n             </div>\n            );\n        }\n    }\n}\nexport default ProxyBindingsCreate\n","import httpRequest from './httpRequest';\n\nfunction proxyBindingsListRequest() {\n    return httpRequest('proxy-bindings', 'GET', {});\n}\n\nexport default proxyBindingsListRequest;\n","import httpRequest from './httpRequest';\n\nfunction deleteBinding(bindingId) {\n    return httpRequest('proxy-bindings/' + bindingId, 'DELETE', {});\n}\n\nexport default deleteBinding;\n","import httpRequest from './httpRequest';\n\nfunction patchProxy(id, realAddresses, proxyAddress) {\n    return httpRequest('proxy-bindings/'+id, 'PATCH', \n    {\n        \"data\" :{\n            \"id\": id,\n            \"type\": \"proxy_bindings\",\n            \"attributes\": {\n               \"real_addresses\": realAddresses,\n               \"proxy_address\": proxyAddress\n            }\n        }\n    });\n}\n\nexport default patchProxy;\n","import React from 'react';\nimport ProxyBindingsListRequest from '../http/proxyBindingsListRequest';\nimport deleteBinding from '../http/deleteBinding';\nimport patchProxy from '../http/patchProxy';\n\nclass ProxyBindingsList extends React.Component {\n    isLoaded = 0;\n\n    constructor(props) {\n        super(props);\n\n        this.props = props;\n        this.bindings = [];\n        this.props.parent.proxyBindingsListComponent = this;\n    }\n    \n    componentDidMount() {\n\n        if (window.mode !== 'mainpage') {\n            this.load();\n        } else {\n            this.isLoaded = 1;\n            this.forceUpdate();\n        }\n    }\n\n    load() {\n        this.bindings = ProxyBindingsListRequest().then(response => {\n            this.bindings = response.data;\n            this.props.state.proxyBindings = this.bindings;\n            if (this.bindings.length > 0) {\n                const lastBinding = this.bindings[this.bindings.length - 1];\n\n\n                const length = Object.keys(lastBinding.attributes.real_addresses).length;\n\n                console.log(length);\n\n                this.props.parent.proxyCreateBindingState.lastRealAddress = Object.keys(lastBinding.attributes.real_addresses)[length-1];\n                this.props.parent.proxyBindingCreateComponent.componentDidMount();\n            }\n            this.isLoaded = 1;\n            this.forceUpdate();\n        });\n    }\n\n    remove(item, realAddress)\n    {\n        if (Object.keys(item.attributes.real_addresses).length === 1) {\n            deleteBinding(item.id);\n            this.props.state.proxyBindings = this.props.state.proxyBindings.reduce((acc, reduceItem) => {\n                if (item.id !== reduceItem.id) {\n                     acc.push(reduceItem);\n                }\n                return acc;\n            }, []);\n            this.forceUpdate();\n        } else {\n            let realAddresses = Object.keys(item.attributes.real_addresses).reduce((acc, reduceItem) => {\n\n                console.log(realAddress, reduceItem);\n                if (reduceItem !== realAddress) {\n                    acc[reduceItem] = item.attributes.real_addresses[reduceItem];\n                }\n\n                return acc;\n            }, []);\n\n            console.log(realAddresses);\n            patchProxy(item.id, realAddresses, item.attributes.proxy_address, true).then(response => {\n                this.props.state.proxyBindings = this.props.state.proxyBindings.reduce((acc, reduceItem) => {\n                    if (item.id !== response.data.id) {\n                         acc.push(reduceItem);\n                    } else {\n                        acc.push(response.data);\n                    }\n\n                    return acc;\n                }, []);    \n            });\n        }\n    }\n\n\n    changeStatus(item, realAddress)\n    {   \n        let realAddresses = item.attributes.real_addresses;\n        realAddresses[realAddress] = !item.attributes.real_addresses[realAddress];\n\n\n        patchProxy(item.id, realAddresses, item.attributes.proxy_address).then(response => {\n            this.props.state.proxyBindings = this.props.state.proxyBindings.reduce((acc, reduceItem) => {\n\n                console.log()\n\n                if (reduceItem.id !== response.data.id) {\n                     acc.push(reduceItem);\n                } else {\n                    acc.push(response.data);\n                }\n\n                return acc;\n            }, []);\n            this.forceUpdate();\n        });\n    }\n\n\n    render() {\n        let styleDisplay, spinnerStyle;\n        if (this.props.state.proxyBindings.length === 0) {\n            styleDisplay = {'display':'none'};\n        } else {\n            styleDisplay = {'display':'table'};\n        }\n        spinnerStyle = this.isLoaded === 0 ? {'display':'table'} : {'display':'none'};\n\n        return (\n            <div>\n            <div className=\"spinner-border\" role=\"status\" id=\"loader\" style={spinnerStyle}>\n            <span className=\"sr-only\">Loading...</span>\n            </div>\n\n\n\n        <table className=\"table\" id=\"table\" style={styleDisplay}>\n            <thead>\n                <tr>\n                    <th scope=\"col\">Real email</th>\n                    <th scope=\"col\">Proxy Email</th>\n                    <th scope=\"col\">Received Emails</th>\n                    <th scope=\"col\">Manage</th>\n                </tr>\n            </thead>\n            <tbody>\n            {this.props.state.proxyBindings.map((item, index) =>\n                Object.keys(item.attributes.real_addresses).map((real_address) => (\n                <tr>\n                    <td>{real_address}</td>\n                    <td>{item.attributes.proxy_address}</td>\n                    <td>{item.attributes.received_emails} ({item.attributes.real_addresses[real_address] ?\n                         <font style={{color: 'green'}}>Enabled</font> : <font style={{color: 'red'}}>Disabled</font> })</td>\n\n\n                    <td>\n                        <button\n                            type=\"button\"\n                            className=\"btn btn-sm btn-danger pb-remove\"\n                            onClickCapture={click => this.remove(item, real_address)}\n                            style={{'font-size': '11px'}}\n                        >\n                            Remove\n                        </button>\n\n                        <button\n                            type=\"button\"\n                            className={item.attributes.real_addresses[real_address] ? \"btn btn-sm btn-secondary pb-status-change\" : 'btn btn-sm btn-success pb-status-change'}\n                            onClickCapture={click => this.changeStatus(item, real_address)}\n                            style={{'margin-left': '4px', 'font-size': '11px'}}\n                        >\n                            {item.attributes.real_addresses[real_address] ? 'Disable' : 'Enable'}\n                        </button>\n\n                            <hr/>\n                        </td>\n\n                </tr>\n                )\n                ))}\n            </tbody>\n            </table>\n            </div>\n        );\n    }\n}\nexport default ProxyBindingsList;\n","import React from 'react'\nimport ProxyBindingsCreate from '../containers/ProxyBindingsCreate';\nimport ProxyBindingsList from '../containers/ProxyBindingsList';\n\n\nclass App extends React.Component {\n\n    constructor(props)\n    {\n        super(props);\n        this.state = {\n            'proxyBindings': []\n        };\n        this.proxyCreateBindingState = {\n            'lastRealAddress': '',\n        };\n        this.proxyBindingCreateComponent = null;\n    }\n\n    rerender(proxyBindings) {\n        const length = Object.keys(proxyBindings.attributes.real_addresses).length;\n        if (length > 1) {\n            const realAddress = proxyBindings.attributes.real_addresses;\n            proxyBindings.attributes.real_addresses[Object.keys(realAddress)[length -1]] = Object.values(realAddress)[length -1];\n        }\n\n\n        if (length > 1) {\n            console.log(length, proxyBindings.attributes.real_addresses);\n            this.state.proxyBindings = this.state.proxyBindings.reduce(function (acc, item) {\n                if (item.id === proxyBindings.id) {\n                    acc.push(proxyBindings);\n                } else {\n                    console.log(item);\n                    acc.push(item);\n                }\n\n                return acc;\n            }, []);\n            console.log(this.state.proxyBindings);\n        } else {\n            console.log('t');\n            this.state.proxyBindings.push(proxyBindings);\n        }\n\n        this.proxyBindingsListComponent.load();\n\n        this.forceUpdate();\n    }\n\n    render() {\n        return (\n            <div>\n                <ProxyBindingsList state={this.state} parent={this}/>\n                <ProxyBindingsCreate parent={this} state={this.proxyCreateBindingState}/>\n          </div>        \n        );\n    }\n}\n\n\nexport default App\n","import React from 'react'\nimport { render } from 'react-dom'\nimport App from './components/App'\n\nif (!window.api) {\n  window.api = 'http://localhost:904/api/v1/';\n}\n\nrender(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}